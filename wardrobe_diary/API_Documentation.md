# Wardrobe Diary API 接口文档

本文档描述了Wardrobe日记模块的接口，供前端开发人员参考使用。

## 基本信息

- **Base URL**: `/wardrobe_diary/`
- **认证方式**: 所有接口都需要用户认证 (JWT Token)
- **Content-Type**: `application/json` 或 `application/x-www-form-urlencoded`
- **响应格式**: JSON

## 认证说明

所有接口都需要在请求头中包含有效的认证Token：

```
Authorization: Bearer <your_jwt_token>
```

## 数据模型

### Texts (日记文本)

```json
{
    "id": 1,
    "date": "2025-07-24",
    "text": "今天的日记内容..."
}
```

## API 接口

### 1. 搜索日记 - POST /search/

根据关键词和日期范围搜索日记内容。

#### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| searchKey | string | 否 | "" | 搜索关键词，支持多个词用空格分隔 |
| dateFrom | string | 否 | "" | 开始日期，格式：YYYY-MM-DD |
| dateTo | string | 否 | "" | 结束日期，格式：YYYY-MM-DD |
| orderBy | string | 否 | "date" | 排序字段 |
| order | string | 否 | "desc" | 排序方向：asc/desc |
| pageSize | integer | 否 | 20 | 每页条数 |
| page | integer | 否 | 1 | 页码，从1开始 |

#### 请求示例

```json
{
    "searchKey": "今天 开心",
    "dateFrom": "2025-01-01",
    "dateTo": "2025-12-31",
    "orderBy": "date",
    "order": "desc",
    "pageSize": 10,
    "page": 1
}
```

#### 响应示例

```json
{
    "totalPage": 5,
    "textList": [
        {
            "id": 1,
            "date": "2025-07-24",
            "text": "今天很开心，学到了很多新东西"
        },
        {
            "id": 2,
            "date": "2025-07-23",
            "text": "今天的天气很好"
        }
    ]
}
```

#### 错误响应

- **400**: 页码无效
- **500**: 服务器内部错误

---

### 2. 获取日记 - POST /get/

获取日记文本，支持获取单条或全部日记。

#### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | integer | 否 | 日记ID，不提供则返回所有日记 |

#### 请求示例

获取单条日记：
```json
{
    "id": 1
}
```

获取所有日记：
```json
{}
```

#### 响应示例

单条日记：
```json
{
    "id": 1,
    "date": "2025-07-24",
    "text": "今天的日记内容..."
}
```

所有日记：
```json
[
    {
        "id": 1,
        "date": "2025-07-24",
        "text": "今天的日记内容..."
    },
    {
        "id": 2,
        "date": "2025-07-23",
        "text": "昨天的日记内容..."
    }
]
```

#### 错误响应

- **400**: ID格式无效
- **404**: 日记不存在
- **500**: 服务器内部错误

---

### 3. 新建日记 - POST /new/

创建新的日记条目。

#### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| date | string | 是 | 日期，格式：YYYY-MM-DD |
| text | string | 是 | 日记内容 |

#### 请求示例

```json
{
    "date": "2025-07-24",
    "text": "今天学习了Vue.js，感觉很有趣！"
}
```

#### 响应示例

```json
{
    "status": "Success",
    "id": 123
}
```

#### 错误响应

- **400**: 缺少必填字段或日期格式错误
- **500**: 服务器内部错误

---

### 4. 删除日记 - POST /delete/

删除指定的日记条目。

#### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | integer | 是 | 要删除的日记ID |

#### 请求示例

```json
{
    "id": 123
}
```

#### 响应示例

```json
{
    "status": "Success"
}
```

#### 错误响应

- **400**: 缺少ID或ID格式无效
- **404**: 日记不存在
- **500**: 服务器内部错误

---

### 5. 编辑日记 - POST /edit/

编辑现有的日记条目。

#### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | integer | 是 | 要编辑的日记ID |
| date | string | 否 | 新的日期，格式：YYYY-MM-DD |
| text | string | 否 | 新的日记内容 |

#### 请求示例

```json
{
    "id": 123,
    "date": "2025-07-24",
    "text": "修改后的日记内容"
}
```


## 注意事项

1. **日期格式**: 所有日期必须使用 `YYYY-MM-DD` 格式
2. **认证**: 所有接口都需要有效的JWT Token
3. **分页**: 搜索接口支持分页，页码从1开始
4. **搜索**: 支持多关键词搜索，用空格分隔
5. **错误处理**: 请妥善处理各种HTTP状态码
6. **编码**: 请确保文本内容使用UTF-8编码

## 状态码说明

- **200**: 请求成功
- **400**: 请求参数错误
- **401**: 未认证或认证失败
- **404**: 资源不存在
- **500**: 服务器内部错误
